(function(e){function t(t){for(var a,c,i=t[0],u=t[1],s=t[2],l=0,p=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&p.push(o[c][0]),o[c]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==o[i]&&(a=!1)}a&&(r.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},c={app:0},o={app:0},r=[];function i(e){return u.p+"static/js/"+({about:"about",account:"account",data:"data",detail:"detail",login:"login",user:"user"}[e]||e)+"."+{about:"5a86c8d9",account:"c9404578",data:"ddd89e03",detail:"3aaaa270",login:"3737398c",user:"60b03813"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={about:1,account:1,data:1,detail:1,login:1,user:1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var a="static/css/"+({about:"about",account:"account",data:"data",detail:"detail",login:"login",user:"user"}[e]||e)+"."+{about:"ec805392",account:"6c545685",data:"ebb68876",detail:"64f08159",login:"ccded1e2",user:"8524aab9"}[e]+".css",o=u.p+a,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var s=r[i],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===a||l===o))return t()}var p=document.getElementsByTagName("style");for(i=0;i<p.length;i++){s=p[i],l=s.getAttribute("data-href");if(l===a||l===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete c[e],d.parentNode.removeChild(d),n(r)},d.href=o;var b=document.getElementsByTagName("head")[0];b.appendChild(d)})).then((function(){c[e]=0})));var a=o[e];if(0!==a)if(a)t.push(a[2]);else{var r=new Promise((function(t,n){a=o[e]=[t,n]}));t.push(a[2]=r);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=i(e);var p=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+a+": "+c+")",p.name="ChunkLoadError",p.type=a,p.request=c,n[1](p)}o[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var p=0;p<s.length;p++)t(s[p]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0774":function(e,t,n){"use strict";n("c3dd")},"108d":function(e,t,n){"use strict";n("b0c0");var a=n("7a23"),c=Object(a["N"])("data-v-b3d34a42");Object(a["A"])("data-v-b3d34a42");var o={class:"add-wrap"},r={class:"header"},i=Object(a["h"])("确定"),u={class:"filter"},s={class:"type"},l=Object(a["i"])("i",{class:"iconfont sort-down"},null,-1),p={class:"money"},d=Object(a["i"])("span",{class:"sufix"},"¥",-1),b={class:"amount animation"},f={class:"type-warp"},j={key:0,class:"type-body"},m={key:1,class:"type-body"};Object(a["y"])();var O=c((function(e,t,n,O,h,y){var v=Object(a["E"])("van-icon"),g=Object(a["E"])("van-button"),w=Object(a["E"])("van-number-keyboard"),x=Object(a["E"])("van-field"),T=Object(a["E"])("van-dialog"),k=Object(a["E"])("van-datetime-picker"),C=Object(a["E"])("van-popup");return Object(a["x"])(),Object(a["f"])(C,{show:e.show,"onUpdate:show":t[12]||(t[12]=function(t){return e.show=t}),position:"bottom",round:""},{default:c((function(){return[Object(a["i"])("div",o,[Object(a["i"])("header",r,[Object(a["i"])("span",{class:"close",onClick:t[1]||(t[1]=function(t){return e.show=!1})},[Object(a["i"])(v,{name:"cross"})]),Object(a["i"])(g,{class:"add-btn",type:"primary",size:"small",onClick:O.addBill},{default:c((function(){return[i]})),_:1},8,["onClick"])]),Object(a["i"])("div",u,[Object(a["i"])("div",s,[Object(a["i"])("span",{onClick:t[2]||(t[2]=function(e){return O.changeType("expense")}),class:{expense:!0,active:"expense"==e.payType}},"支出",2),Object(a["i"])("span",{onClick:t[3]||(t[3]=function(e){return O.changeType("income")}),class:{income:!0,active:"income"==e.payType}},"收入",2)]),Object(a["i"])("div",{onClick:t[4]||(t[4]=function(t){return e.showDay=!0}),class:"time"},[Object(a["h"])(Object(a["G"])(e.$filters.transDay(e.date))+" ",1),l])]),Object(a["i"])("div",p,[d,Object(a["i"])("span",b,Object(a["G"])(e.amount),1)]),Object(a["i"])("div",f,["expense"==e.payType?(Object(a["x"])(),Object(a["f"])("div",j,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.expense,(function(t){return Object(a["x"])(),Object(a["f"])("div",{class:"type-item",key:t.id,onClick:function(e){return O.choseType(t)}},[Object(a["i"])("span",{class:{"iconfont-wrap":!0,expense:!0,active:e.currentType.id==t.id}},[Object(a["i"])("i",{class:["iconfont",t.icon]},null,2)],2),Object(a["i"])("span",null,Object(a["G"])(t.name),1)],8,["onClick"])})),128))])):(Object(a["x"])(),Object(a["f"])("div",m,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.income,(function(t){return Object(a["x"])(),Object(a["f"])("div",{class:"type-item",key:t.id,onClick:function(e){return O.choseType(t)}},[Object(a["i"])("span",{class:{"iconfont-wrap":!0,income:!0,active:e.currentType.id==t.id}},[Object(a["i"])("i",{class:["iconfont",t.icon]},null,2)],2),Object(a["i"])("span",null,Object(a["G"])(t.name),1)],8,["onClick"])})),128))]))]),e.remark?(Object(a["x"])(),Object(a["f"])("div",{key:0,class:"remark",onClick:t[5]||(t[5]=function(e){return O.remarkVisible=!0})},Object(a["G"])(e.remark),1)):(Object(a["x"])(),Object(a["f"])("div",{key:1,class:"remark",onClick:t[6]||(t[6]=function(e){return O.remarkVisible=!0})},"添加备注")),Object(a["i"])(w,{show:!0,"extra-key":".",onDelete:O.remove,onInput:O.inputChange},null,8,["onDelete","onInput"])]),Object(a["i"])(T,{show:O.remarkVisible,"onUpdate:show":t[8]||(t[8]=function(e){return O.remarkVisible=e}),title:"备注","show-cancel-button":""},{default:c((function(){return[Object(a["i"])(x,{modelValue:e.remark,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.remark=t}),rows:"2",autosize:"",type:"textarea",maxlength:"10",placeholder:"请输入备注","show-word-limit":""},null,8,["modelValue"])]})),_:1},8,["show"]),Object(a["i"])(C,{show:e.showDay,"onUpdate:show":t[11]||(t[11]=function(t){return e.showDay=t}),position:"bottom",round:"",style:{height:"46%"}},{default:c((function(){return[Object(a["i"])(k,{modelValue:e.date,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.date=t}),type:"date",title:"选择时间",onConfirm:O.choseDay,onCancel:t[10]||(t[10]=function(t){return e.showDay=!1})},null,8,["modelValue","onConfirm"])]})),_:1},8,["show"])]})),_:1},8,["show"])})),h=(n("4de4"),n("caad"),n("d81d"),n("fb6a"),n("a9e3"),n("b680"),n("ac1f"),n("2532"),n("1276"),n("5530")),y=(n("433b"),n("d399")),v=(n("96cf"),n("1da1")),g=n("5a0c"),w=n.n(g),x=n("ed08"),T=n("a27e"),k={props:{refresh:Function,detail:{type:Object,default:{}}},setup:function(e,t){var n=e.detail&&e.detail.id,c=Object(a["C"])(!1),o=Object(a["B"])({show:!1,amount:n?e.detail.amount:"",payType:n?1==e.detail.pay_type?"expense":"income":"expense",expense:[],income:[],typeMap:x["a"],currentType:n?{id:e.detail.type_id,name:e.detail.type_name}:{},showDay:!1,date:n?w()(Number(e.detail.date)).$d:new Date,remark:n?e.detail.remark:""});Object(a["u"])(Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,c,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T["a"].get("/type/list");case 2:t=e.sent,a=t.data,c=a.map((function(e){return{id:e.id,type:e.payType,icon:e.icon,name:e.typeName}})),r=c,o.expense=r.filter((function(e){return 1==e.type})),o.income=r.filter((function(e){return 2==e.type})),n||(o.currentType=o.expense[0]);case 9:case"end":return e.stop()}}),e)}))));var r=function(){o.show=!o.show},i=function(e){"."==e&&o.amount.includes(".")||"."!=e&&o.amount.includes(".")&&o.amount&&o.amount.split(".")[1].length>=2||(o.amount+=e)},u=function(){o.amount=o.amount.slice(0,o.amount.length-1)},s=function(e){o.currentType=e},l=function(e){o.payType=e,o.currentType=o[e][0]},p=function(e){o.date=e,o.showDay=!1},d=function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.amount){e.next=3;break}return y["a"].fail("请输入具体金额"),e.abrupt("return");case 3:if(a={amount:100*Number(o.amount).toFixed(2),typeId:o.currentType.id,typeName:o.currentType.name,date:1e3*w()(o.date).unix(),payType:"expense"==o.payType?1:2,remark:o.remark||""},!n){e.next=14;break}return a.id=n,e.next=8,T["a"].put("/bill",a);case 8:e.sent,o.show=!1,y["a"].success("修改成功"),t.emit("refresh"),e.next=25;break;case 14:return e.next=16,T["a"].post("/bill",a);case 16:e.sent,o.amount="",o.payType="expense",o.currentType=o.expense[0],o.show=!1,o.date=new Date,o.remark="",y["a"].success("添加成功"),t.emit("refresh");case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h["a"])(Object(h["a"])({},Object(a["H"])(o)),{},{toggle:r,inputChange:i,remove:u,choseType:s,changeType:l,choseDay:p,addBill:d,remarkVisible:c})}};n("e160");k.render=O,k.__scopeId="data-v-b3d34a42";t["a"]=k},"195c":function(e,t,n){},2900:function(e,t,n){"use strict";n("d78a")},3233:function(e,t,n){"use strict";n("3aef")},"3aef":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("a9e3"),n("a247");var a=n("9ed2"),c=(n("0645"),n("39d1")),o=(n("5f68"),n("f600")),r=(n("47e2"),n("2241")),i=(n("81a6"),n("7bd9")),u=(n("578d"),n("ee83")),s=(n("4391"),n("58e6")),l=(n("93b0"),n("2bdd")),p=(n("87d0"),n("e41f")),d=(n("3ec1"),n("7744")),b=(n("2a53"),n("34e9")),f=(n("da02"),n("6b41")),j=(n("b342"),n("ad06")),m=(n("c625"),n("b650")),O=(n("9eda"),n("565f")),h=(n("5a5c"),n("772a")),y=(n("4627"),n("2ed4")),v=(n("1318"),n("ac28")),g=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("7a23"));function w(e,t,n,a,c,o){var r=Object(g["E"])("router-view"),i=Object(g["E"])("NavBar");return Object(g["x"])(),Object(g["f"])(g["a"],null,[Object(g["i"])(r),e.show?(Object(g["x"])(),Object(g["f"])(i,{key:0})):Object(g["g"])("",!0)],64)}n("caad"),n("2532");var x=n("5530"),T=(n("9911"),Object(g["h"])("明细")),k=Object(g["h"])("统计"),C=Object(g["h"])("我的");function E(e,t,n,a,c,o){var r=Object(g["E"])("van-tabbar-item"),i=Object(g["E"])("van-tabbar");return Object(g["x"])(),Object(g["f"])(i,{modelValue:a.active,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.active=e})},{default:Object(g["L"])((function(){return[Object(g["i"])(r,{name:"/home",icon:"notes-o",onClick:t[1]||(t[1]=function(e){return a.link("/home")})},{default:Object(g["L"])((function(){return[T]})),_:1}),Object(g["i"])(r,{name:"/data",icon:"bar-chart-o",onClick:t[2]||(t[2]=function(e){return a.link("/data")})},{default:Object(g["L"])((function(){return[k]})),_:1}),Object(g["i"])(r,{name:"/user",icon:"user-o",onClick:t[3]||(t[3]=function(e){return a.link("/user")})},{default:Object(g["L"])((function(){return[C]})),_:1})]})),_:1},8,["modelValue"])}var _=n("6c02"),R={name:"NavBar",props:{msg:String},setup:function(){var e=Object(_["d"])(),t=Object(g["C"])("/home"),n=function(t){e.push({path:t})};return Object(g["u"])((function(){t.value=e.currentRoute.value.path})),e.afterEach((function(){t.value=e.currentRoute.value.path})),{active:t,link:n}}};n("e63a");R.render=E;var D=R,N={name:"App",components:{NavBar:D},setup:function(){var e=Object(g["B"])({menu:["/user","/home","/data"],show:!1}),t=Object(_["d"])();return t.afterEach((function(){e.show=e.menu.includes(t.currentRoute.value.path)})),Object(x["a"])({},Object(g["H"])(e))}};N.render=w;var M=N,A=n("5a0c"),P=n.n(A),S=(n("499a"),n("a18c")),V=(n("157a"),n("a766"),Object(g["e"])(M));V.config.globalProperties.$filters={transTime:function(e){return P()(Number(e)).format("HH:mm")},transHms:function(e,t){return P()(e,t).format("HH:mm:ss")},transDay:function(e){return P()(e).format("YYYY-MM-DD")},transYDM:function(e){return P()(e).format("YYYY-MM-DD HH:mm")}},V.use(S["a"]),V.use(v["b"]),V.use(y["a"]),V.use(h["a"]),V.use(O["a"]),V.use(m["a"]),V.use(j["a"]),V.use(f["a"]),V.use(b["a"]),V.use(d["b"]),V.use(p["a"]),V.use(l["a"]),V.use(s["a"]),V.use(u["a"]),V.use(i["a"]),V.use(r["a"]),V.use(o["a"]),V.use(c["a"]),V.use(a["a"]),V.mount("#app")},"6a45":function(e,t,n){"use strict";n("195c")},"8f04":function(e,t,n){"use strict";var a=n("7a23");function c(e,t,n,c,o,r){var i=Object(a["E"])("van-datetime-picker"),u=Object(a["E"])("van-popup");return Object(a["x"])(),Object(a["f"])(u,{show:e.show,"onUpdate:show":t[2]||(t[2]=function(t){return e.show=t}),position:"bottom",round:"",style:{height:"46%"}},{default:Object(a["L"])((function(){return[Object(a["i"])(i,{modelValue:e.active,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.active=t}),type:"year-month",title:"选择年月",formatter:c.formatter,onConfirm:c.choseMonth,onCancel:c.toggle},null,8,["modelValue","formatter","onConfirm","onCancel"])]})),_:1},8,["show"])}var o=n("5530"),r=n("5a0c"),i=n.n(r),u={props:{select:Function},setup:function(e,t){var n=Object(a["B"])({show:!1,active:new Date}),c=function(){n.show=!n.show},r=function(e){console.log(e),n.active=e,n.show=!1,t.emit("select",i()(e).format("YYYY-MM"))},u=function(e,t){return"year"===e?"".concat(t,"年"):"month"===e?"".concat(t,"月"):t};return Object(o["a"])(Object(o["a"])({},Object(a["H"])(n)),{},{toggle:c,choseMonth:r,formatter:u})}};u.render=c;t["a"]=u},"90d9":function(e,t,n){},a18c:function(e,t,n){"use strict";n("d3b7");var a=n("7a23"),c=n("6c02"),o=(n("b0c0"),Object(a["N"])("data-v-73b6473e"));Object(a["A"])("data-v-73b6473e");var r={class:"home"},i={class:"header"},u={class:"title"},s={class:"data-wrap"},l=Object(a["i"])("i",{class:"iconfont sort-down"},null,-1),p={class:"expense"},d={class:"income"},b={class:"content-wrap"};Object(a["y"])();var f=o((function(e,t,n,c,f,j){var m=Object(a["E"])("CardItem"),O=Object(a["E"])("van-list"),h=Object(a["E"])("van-pull-refresh"),y=Object(a["E"])("van-icon"),v=Object(a["E"])("PopType"),g=Object(a["E"])("PopMonth"),w=Object(a["E"])("PopAdd"),x=Object(a["E"])("PopTypeAdd");return Object(a["x"])(),Object(a["f"])("div",r,[Object(a["i"])("div",i,[Object(a["i"])("div",{class:"type-wrap",onClick:t[4]||(t[4]=function(){return c.toggle&&c.toggle.apply(c,arguments)})},[Object(a["i"])("span",u,Object(a["G"])(e.currentSelect.name||"全部类型"),1),Object(a["i"])("i",{class:"iconfont leixing",onTouchstart:t[1]||(t[1]=function(){return c.onTouchStart&&c.onTouchStart.apply(c,arguments)}),onTouchmove:t[2]||(t[2]=function(){return c.onTouchMove&&c.onTouchMove.apply(c,arguments)}),onTouchend:t[3]||(t[3]=function(){return c.onTouchEnd&&c.onTouchEnd.apply(c,arguments)})},null,32)]),Object(a["i"])("div",s,[Object(a["i"])("span",{class:"time",onClick:t[5]||(t[5]=function(){return c.monthToggle&&c.monthToggle.apply(c,arguments)})},[Object(a["h"])(Object(a["G"])(e.currentTime)+" ",1),l]),Object(a["i"])("span",p,"总支出 ¥"+Object(a["G"])(e.totalExpense),1),Object(a["i"])("span",d,"总收入 ¥"+Object(a["G"])(e.totalIncome),1)])]),Object(a["i"])("div",b,[Object(a["i"])(h,{modelValue:e.refreshing,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.refreshing=t}),onRefresh:c.onRefresh},{default:o((function(){return[Object(a["i"])(O,{loading:e.loading,"onUpdate:loading":t[6]||(t[6]=function(t){return e.loading=t}),finished:e.finished,"finished-text":"没有更多了",onLoad:c.onLoad},{default:o((function(){return[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.list,(function(e){return Object(a["x"])(),Object(a["f"])(m,{bill:e,key:e},null,8,["bill"])})),128))]})),_:1},8,["loading","finished","onLoad"])]})),_:1},8,["modelValue","onRefresh"])]),Object(a["i"])("div",{class:"add",onClick:t[8]||(t[8]=function(){return c.addToggle&&c.addToggle.apply(c,arguments)})},[Object(a["i"])(y,{name:"records"})]),Object(a["i"])(v,{ref:"popRef",onSelect:c.select},null,8,["onSelect"]),Object(a["i"])(g,{ref:"popMonthRef",onSelect:c.selectMonth},null,8,["onSelect"]),Object(a["i"])(w,{ref:"popAddRef",onRefresh:c.onRefresh},null,8,["onRefresh"]),Object(a["i"])(x,{ref:"popTypeAddRef"},null,512)])})),j=(n("99af"),n("d81d"),n("a9e3"),n("b680"),n("5530")),m=(n("96cf"),n("1da1")),O=Object(a["N"])("data-v-c528d004");Object(a["A"])("data-v-c528d004");var h={class:"header-date"},y={class:"money"},v=Object(a["i"])("b",null,"支",-1),g=Object(a["i"])("b",null,"收",-1);Object(a["y"])();var w=O((function(e,t,n,c,o,r){var i=Object(a["E"])("van-cell"),u=Object(a["E"])("van-cell-group");return Object(a["x"])(),Object(a["f"])(u,{class:"item"},{default:O((function(){return[Object(a["i"])("div",h,[Object(a["i"])("div",null,Object(a["G"])(n.bill.date),1),Object(a["i"])("div",y,[Object(a["i"])("span",null,[v,Object(a["h"])(Object(a["G"])(e.expense.toFixed(2)),1)]),Object(a["i"])("span",null,[g,Object(a["h"])(Object(a["G"])(e.income.toFixed(2)),1)])])]),(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(n.bill.bills,(function(t){return Object(a["x"])(),Object(a["f"])(i,{class:{expense:1==t.payType,income:2==t.payType},key:t.id,onClick:function(e){return c.goToDetail(t)},title:t.type.typeName,value:"".concat(1==t.payType?"-":"+").concat(t.amount),label:"".concat(e.$filters.transTime(t.date)).concat(t.remark?" | "+t.remark:"")},null,8,["class","onClick","title","value","label"])})),128))]})),_:1})})),x=(n("4de4"),n("13d5"),{name:"CardItem",props:{bill:{type:Object,default:{}}},setup:function(e){var t=Object(c["d"])(),n=Object(a["B"])({income:0,expense:0});n.income=e.bill.bills.filter((function(e){return 2==e.payType})).reduce((function(e,t){return e+=Number(t.amount),e}),0),n.expense=e.bill.bills.filter((function(e){return 1==e.payType})).reduce((function(e,t){return e+=Number(t.amount),e}),0);var o=function(e){console.log(e.id),t.push({path:"/detail",query:{id:e.id}})};return Object(j["a"])(Object(j["a"])({},Object(a["H"])(n)),{},{goToDetail:o})}});n("3233"),n("0774");x.render=w,x.__scopeId="data-v-c528d004";var T=x,k=Object(a["N"])("data-v-20b5743c");Object(a["A"])("data-v-20b5743c");var C={class:"pop"},E={class:"header van-hairline--bottom"},_=Object(a["h"])(" 请选择类型 "),R={class:"content"},D=Object(a["i"])("div",{class:"title"},"支出",-1),N={class:"expense-wrap"},M=Object(a["i"])("div",{class:"title"},"收入",-1),A={class:"income-wrap"};Object(a["y"])();var P=k((function(e,t,n,c,o,r){var i=Object(a["E"])("van-icon"),u=Object(a["E"])("van-popup");return Object(a["x"])(),Object(a["f"])(u,{show:e.show,"onUpdate:show":t[2]||(t[2]=function(t){return e.show=t}),position:"bottom",round:""},{default:k((function(){return[Object(a["i"])("div",C,[Object(a["i"])("div",E,[_,Object(a["i"])(i,{name:"cross",class:"cross",onClick:c.toggle},null,8,["onClick"])]),Object(a["i"])("div",R,[Object(a["i"])("div",{onClick:t[1]||(t[1]=function(e){return c.choseType({id:""})}),class:{all:!0,active:"全部类型"==e.active}},"全部类型",2),D,Object(a["i"])("div",N,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.expense,(function(t){return Object(a["x"])(),Object(a["f"])("p",{onClick:function(e){return c.choseType(t)},class:{active:e.active==t.id},key:t},Object(a["G"])(t.name),11,["onClick"])})),128))]),M,Object(a["i"])("div",A,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.income,(function(t){return Object(a["x"])(),Object(a["f"])("p",{onClick:function(e){return c.choseType(t)},class:{active:e.active==t.id},key:t},Object(a["G"])(t.name),11,["onClick"])})),128))])])])]})),_:1},8,["show"])})),S=n("a27e"),V={props:{select:Function},setup:function(e,t){var n=Object(a["B"])({active:"全部类型",show:!1,showAdd:!1,expense:[],income:[],typeName:"",payType:1,currentType:{}});Object(a["u"])(Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S["a"].get("/type/list");case 2:t=e.sent,a=t.data,c=a.map((function(e){return{id:e.id,type:e.payType,icon:e.icon,name:e.typeName}})),n.expense=c.filter((function(e){return 1==e.type})),n.income=c.filter((function(e){return 2==e.type}));case 7:case"end":return e.stop()}}),e)}))));var c=function(){n.show=!n.show},o=function(e){n.active=e.id,n.show=!1,t.emit("select",e)};return Object(j["a"])(Object(j["a"])({},Object(a["H"])(n)),{},{toggle:c,choseType:o})}};n("2900");V.render=P,V.__scopeId="data-v-20b5743c";var I=V,B=n("8f04"),L=n("108d"),H=Object(a["N"])("data-v-43c5698d");Object(a["A"])("data-v-43c5698d");var U={class:"add-wrap"},Y={class:"header"},G=Object(a["h"])("确定"),F={class:"filter"},q={class:"type"},z={class:"money"},$={class:"type-warp"},J={key:0,class:"type-body"},X={key:1,class:"type-body"};Object(a["y"])();var K=H((function(e,t,n,c,o,r){var i=Object(a["E"])("van-icon"),u=Object(a["E"])("van-button"),s=Object(a["E"])("van-field"),l=Object(a["E"])("van-cell-group"),p=Object(a["E"])("van-popup");return Object(a["x"])(),Object(a["f"])(p,{show:e.show,"onUpdate:show":t[5]||(t[5]=function(t){return e.show=t}),position:"bottom",round:""},{default:H((function(){return[Object(a["i"])("div",U,[Object(a["i"])("header",Y,[Object(a["i"])("span",{class:"close",onClick:t[1]||(t[1]=function(t){return e.show=!1})},[Object(a["i"])(i,{name:"cross"})]),Object(a["i"])(u,{class:"add-btn",type:"primary",size:"small",onClick:c.addBill},{default:H((function(){return[G]})),_:1},8,["onClick"])]),Object(a["i"])("div",F,[Object(a["i"])("div",q,[Object(a["i"])("span",{onClick:t[2]||(t[2]=function(e){return c.changeType("expense")}),class:{expense:!0,active:"expense"==e.payType}},"支出",2),Object(a["i"])("span",{onClick:t[3]||(t[3]=function(e){return c.changeType("income")}),class:{income:!0,active:"income"==e.payType}},"收入",2)])]),Object(a["i"])("div",z,[Object(a["i"])(l,{inset:""},{default:H((function(){return[Object(a["i"])(s,{modelValue:e.typeName,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.typeName=t}),placeholder:"请输入类型名"},null,8,["modelValue"])]})),_:1})]),Object(a["i"])("div",$,["expense"==e.payType?(Object(a["x"])(),Object(a["f"])("div",J,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.expense,(function(t){return Object(a["x"])(),Object(a["f"])("div",{class:"type-item",key:t.id,onClick:function(e){return c.choseType(t)}},[Object(a["i"])("span",{class:{"iconfont-wrap":!0,expense:!0,active:e.currentType.id==t.id}},[Object(a["i"])("i",{class:["iconfont",t.icon]},null,2)],2),Object(a["i"])("span",null,Object(a["G"])(t.name),1)],8,["onClick"])})),128))])):(Object(a["x"])(),Object(a["f"])("div",X,[(Object(a["x"])(!0),Object(a["f"])(a["a"],null,Object(a["D"])(e.income,(function(t){return Object(a["x"])(),Object(a["f"])("div",{class:"type-item",key:t.id,onClick:function(e){return c.choseType(t)}},[Object(a["i"])("span",{class:{"iconfont-wrap":!0,income:!0,active:e.currentType.id==t.id}},[Object(a["i"])("i",{class:["iconfont",t.icon]},null,2)],2),Object(a["i"])("span",null,Object(a["G"])(t.name),1)],8,["onClick"])})),128))]))])])]})),_:1},8,["show"])})),W=(n("fb6a"),n("433b"),n("d399")),Q=n("5a0c"),Z=n.n(Q),ee=n("ed08"),te={name:"PopTypeAdd",props:{refresh:Function,detail:{type:Object,default:{}}},setup:function(e,t){var n=e.detail&&e.detail.id,c=(Object(a["C"])(!1),Object(a["B"])({show:!1,typeName:n?e.detail.typeName:"",payType:n?1==e.detail.pay_type?"expense":"income":"expense",expense:[],income:[],typeMap:ee["a"],currentType:n?{id:e.detail.type_id,name:e.detail.type_name,payType:e.detail.type_name,icon:e.detail.icon}:{}}));Object(a["u"])(Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:case"end":return e.stop()}}),e)}))));var o=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,a,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,S["a"].get("/type/list");case 2:t=e.sent,a=t.data,o=a.map((function(e){return{id:e.id,type:e.payType,icon:e.icon,name:e.typeName}})),r=o,c.expense=r.filter((function(e){return 1==e.type})),c.income=r.filter((function(e){return 2==e.type})),n||(c.currentType=c.expense[0]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){c.show=!c.show},i=function(){c.amount=c.amount.slice(0,c.amount.length-1)},u=function(e){c.currentType=e},s=function(e){c.payType=e,c.currentType=c[e][0]},l=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c.typeName){e.next=3;break}return W["a"].fail("请输入类型名"),e.abrupt("return");case 3:if(a={typeName:c.typeName,payType:"expense"==c.payType?1:2,icon:c.currentType.icon||"qita"},!n){e.next=14;break}return a.id=n,e.next=8,S["a"].put("/type",a);case 8:e.sent,c.show=!1,W["a"].success("修改成功"),t.emit("refresh"),e.next=25;break;case 14:return e.next=16,S["a"].post("/type",a);case 16:e.sent,c.amount="",c.payType="expense",c.currentType=c.expense[0],c.show=!1,c.date=new Date,c.remark="",W["a"].success("添加成功"),t.emit("refresh");case 25:return e.next=27,o();case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(j["a"])(Object(j["a"])({},Object(a["H"])(c)),{},{toggle:r,remove:i,choseType:u,changeType:s,addBill:l})}};n("6a45");te.render=K,te.__scopeId="data-v-43c5698d";var ne=te,ae={components:{CardItem:T,PopType:I,PopMonth:B["a"],PopTypeAdd:ne,PopAdd:L["a"]},setup:function(){var e=Object(a["C"])(null),t=Object(a["C"])(null),n=Object(a["C"])(null),c=Object(a["C"])(null),o=null,r=Object(a["B"])({totalExpense:0,totalIncome:0,page:1,totalPage:0,list:[],loading:!1,finished:!1,refreshing:!1,currentSelect:{},currentTime:Z()().format("YYYY-MM")}),i=function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S["a"].get("bill/dayByMonth?month=".concat(r.currentTime,"&typeId=").concat(r.currentSelect.id?r.currentSelect.id:"","&pageIndex=").concat(r.page,"&pageSize=5"));case 3:t=e.sent,n=t.data,r.refreshing&&(r.list=[],r.refreshing=!1),a=n.records.map((function(e){var t=e.bills.map((function(e){return Object(j["a"])(Object(j["a"])({},e),{},{amount:Number(e.amount)/100})}));return Object(j["a"])(Object(j["a"])({},e),{},{bills:t})})),n.page=1,n.pages=1,r.loading=!1,r.list=r.list.concat(a),r.totalExpense=Number(n.totalExpense/100).toFixed(2),r.totalIncome=Number(n.totalIncome/100).toFixed(2),r.totalPage=n.pages,r.page>=r.totalPage&&(r.finished=!0),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](0),console.error(e.t0);case 20:return e.prev=20,r.finished=!0,e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),u=function(){!r.refreshing&&r.page<r.totalPage&&(r.page=r.page+1),i()},s=function(){r.finished=!1,r.page=1,r.refreshing=!0,r.loading=!0,u()},l=function(){e.value.toggle()},p=function(){c.value.toggle()},d=function(){o=setTimeout((function(){console.log("长按事件"),p()}),1e3)},b=function(){clearTimeout(o)},f=function(){clearTimeout(o)},O=function(e){r.currentSelect=e,s()},h=function(){t.value.toggle()},y=function(e){r.currentTime=e,s()},v=function(){console.log("popAddRef",n),n.value.toggle()};return Object(j["a"])(Object(j["a"])({},Object(a["H"])(r)),{},{popRef:e,popMonthRef:t,popAddRef:n,popTypeAddRef:c,onTouchStart:d,onTouchMove:b,onTouchEnd:f,toggle:l,toggleAddType:p,monthToggle:h,addToggle:v,onLoad:u,onRefresh:s,select:O,selectMonth:y})}};n("e51c");ae.render=f,ae.__scopeId="data-v-73b6473e";var ce=ae,oe=Object(c["a"])({history:Object(c["b"])(),routes:[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:ce},{path:"/data",name:"Data",component:function(){return n.e("data").then(n.bind(null,"9352"))}},{path:"/user",name:"User",component:function(){return n.e("user").then(n.bind(null,"1511"))}},{path:"/login",name:"Login",component:function(){return n.e("login").then(n.bind(null,"a55b"))}},{path:"/detail",name:"Detail",component:function(){return n.e("detail").then(n.bind(null,"c84b"))}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/account",name:"Account",component:function(){return n.e("account").then(n.bind(null,"77be"))}}]});t["a"]=oe},a27e:function(e,t,n){"use strict";n("d3b7"),n("433b");var a=n("d399"),c=n("53ca"),o=n("bc3a"),r=n.n(o),i=n("a18c");r.a.defaults.baseURL="/api",console.log(r.a.defaults.baseURL),r.a.defaults.withCredentials=!0,r.a.defaults.headers["X-Requested-With"]="XMLHttpRequest",r.a.defaults.headers["token"]="".concat(localStorage.getItem("token")||null),r.a.defaults.headers.post["Content-Type"]="application/json",r.a.interceptors.response.use((function(e){return"object"!==Object(c["a"])(e.data)?(a["a"].fail("服务端异常！"),Promise.reject(e)):(console.log(e.data),0!=e.data.code?(e.data.msg&&a["a"].fail(e.data.msg),200==e.data.code&&i["a"].push({path:"/login"}),Promise.reject(e.data)):e.data)})),t["a"]=r.a},a766:function(e,t,n){},c3dd:function(e,t,n){},cecb:function(e,t,n){},d58b:function(e,t,n){},d78a:function(e,t,n){},e160:function(e,t,n){"use strict";n("cecb")},e51c:function(e,t,n){"use strict";n("d58b")},e63a:function(e,t,n){"use strict";n("90d9")},ed08:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={1:{icon:"canyin"},2:{icon:"fushi"},3:{icon:"jiaotong"},4:{icon:"riyong"},5:{icon:"gouwu"},6:{icon:"xuexi"},7:{icon:"yiliao"},8:{icon:"lvxing"},9:{icon:"renqing"},10:{icon:"qita"},11:{icon:"gongzi"},12:{icon:"jiangjin"},13:{icon:"zhuanzhang"},14:{icon:"licai"},15:{icon:"tuikuang"},16:{icon:"qita"}}}});